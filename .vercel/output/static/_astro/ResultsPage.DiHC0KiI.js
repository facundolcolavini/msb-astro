import{s as $,e as E,g as L,f as q,u as I,l as D,r as z,d as H,a as K}from"./filter-default.WOBuaRkQ.js";import"./he.BBeSkhuU.js";import{p as b,_ as C}from"./hooks.module.DQKj1niD.js";import{A as B}from"./ArrowSortIcon.Dl51fkTE.js";import{S as Q,a as Y}from"./SearchDebounce.zJYmFijt.js";import{C as G}from"./CardResultSkeleton.DEuv3ZsG.js";import{B as c}from"./Button.BKC_O57o.js";import J from"./CardProperty.DIhugIPm.js";import{u as e}from"./jsxRuntime.module.CZQ5QUxB.js";import{g as v}from"./preact.module.DPkTw89T.js";import{S as m}from"./SelectField.x2Z9Tg10.js";import"./index.D69GKgpb.js";import"./formats.hIVXQWTe.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./clsx.B-dksMZM.js";import"./bundle-mjs.CsYRq7or.js";import"./InputField.CUOz9hpW.js";/* empty css                       */import"./SquareMeterIcon.BeAM4kpv.js";import"./RuleIcon.CZSGFXSS.js";import"./WhatsAppIcon.BW83w54V.js";const W=()=>e(v,{children:e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-right",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M9 6l6 6l-6 6"})]})}),X=()=>e(v,{children:e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-chevron-left",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M15 6l-6 6l6 6"})]})}),Z=({paginationData:o,setData:y,setLoading:w,resetPagination:a,isSubmitting:g})=>{const P=$.get(),u=E.get(),[t,p]=b(Number(u?.page?.value)?Number(u?.page?.value):0);C(()=>{p(Number(u?.page?.value)?Number(u?.page?.value):0)},[a,g]);const i=r=>{r>=0&&r<=o?.paginas-1&&(p(r),L({...u,page:{label:"page",value:r.toString()}}))},f=async()=>{const d=new AbortController().signal;try{w(!0);const s=await fetch(`/api/results.json?${P}&page=${u?.page?.value}`,{signal:d}),N=await s.json();N.resultado.fichas?.hasOwnProperty("error")?(y(null),w(!1)):s.ok&&(w(!1),y(N.resultado))}catch(s){console.log(s)}};if(C(()=>{f()},[t]),o?.cantidad<=0||o?.paginas<=1)return null;const S=()=>{let r=[];return o?.paginas<=3?r=Array.from({length:o?.paginas},(d,s)=>s):t<=1?r=[0,1,2]:t>=o?.paginas-2?r=[o?.paginas-3,o?.paginas-2,o?.paginas-1]:r=[t-1,t,t+1],r.map(d=>e(c,{addStyles:`hover:bg-[#E9ECEF] py-4 px-6 w-100 border-2 border-gray-200 rounded focus:outline-none  ${d===t?"relative z-1 border-gray-200 bg-gray-200 hover:bg-gray-200 active:bg-gray-300 focus:outline-none focus:ring focus:ring-[#939B41] border-[#939B41] ":"py-4 px-6"} `,variant:"secondary",onClick:()=>i(d),disabled:d>=o?.paginas-1,id:"page",children:d+1},d))};return e("div",{className:"flex items-center justify-center  space-x-0 h-100 ",children:[e(c,{variant:"secondary",addStyles:"hover:bg-[#E9ECEF] p-5 border-2 border-gray-200  rounded-full focus:outline-none  } ",onClick:()=>i(t-1),disabled:t===0,id:"page",children:e(X,{})}),S(),e(c,{variant:"secondary",addStyles:"hover:bg-[#E9ECEF]  p-5 border-2 border-gray-200 rounded-full focus:outline-none  } ",onClick:()=>i(t+3),disabled:t+3>=o?.paginas-1,id:"page",children:e(W,{})})]})},we=({selects:o,locations:y,session:w})=>{const a=E.get(),g=$.get(),t=q({selects:o,locations:y,default:H},K,D),p={tipo_operacion:{value:window.location.search?.includes("tipo_operacion")?window.location.search?.includes("tipo_operacion=A")?"A":window.location.search?.includes("tipo_operacion=T")?"T":window.location.search?.includes("tipo_operacion=V")?"V":"":a?.tipo_operacion?.value??"",label:""},tipo_inmueble:{value:"All",label:"Tipo de propiedad"},Ambientes:{value:"All",label:"Cantidad de Ambientes"},calles:{value:"All",label:"Calle"},sellocalidades:{value:"All",label:"Localidad"},barrios1:{value:"All",label:"Barrio"},moneda:{value:"D",label:"U$D"},valor_minimo:{value:"All",label:"Desde"},valor_maximo:{value:"All",label:"Hasta"},rppagina:{value:"15",label:"15"},in_iub:{value:"",label:""},ordenar:{value:"preciomenor",label:"Ordenar"},in_tpr:{value:"",label:"Barrios Cerrados y Countries"}},[i,f]=b(),[S,r]=b(!1),[d,s]=b(!0),[N,_]=b(!1),[F,j]=b(p?.moneda),{handleSelect:n,resetSelect:M,handleCheckboxChange:U,filtersSelected:x}=I(t,{...p,moneda:F,...a,tipo_operacion:{value:window.location.search?.includes("tipo_operacion")?window.location.search?.includes("tipo_operacion=A")?"A":window.location.search?.includes("tipo_operacion=T")?"T":window.location.search?.includes("tipo_operacion=V")?"V":"":a?.tipo_operacion?.value,label:""}});C(()=>{A(),_(!1)},[g]);const A=async()=>{try{s(!0);const l=await fetch(`/api/results.json?${$.get()}`),h=await l.json();h.resultado.fichas?.hasOwnProperty("error")?(f(null),s(!1),_(!1)):l.ok&&(s(!1),f(h.resultado),_(!1))}catch(l){console.log(l)}},O=(l,h)=>{j({value:h,label:l}),U(l,h)},V=async l=>{l.preventDefault(),l.stopPropagation(),M({}),j(p.moneda),r(!0),z({...p,tipo_operacion:{value:"",label:""}}),await A(),r(!1)},k=async l=>{l.preventDefault(),l.stopPropagation();const R=`${window.location.pathname}${g.length>0?`?${g}`:""}`;window.history.pushState({},"",R),_(!0),await A(),r(!1)},T=l=>{l.key==="Enter"&&k(l)};return C(()=>(document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)),[g]),e("article",{className:"py-10",children:[e("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-12 gap-4 md:px-0 px-3 ",children:[e("div",{className:"lg:col-start-1 lg:col-end-3 flex gap-4",children:e(c,{variant:"outline",onClick:n,value:"V",addStyles:`sm:text-sm md:text-md lg:text-lg  w-full   ${x?.tipo_operacion?.value==="V"&&"text-secondary-msb bg-bg-2-msb border-bg-2-msb border-none hover:border-none transition duration-500 ease-in-out  "}`,id:"tipo_operacion",children:"Venta"})}),e("div",{className:"lg:col-start-3 lg:col-end-5  flex gap-4",children:e(c,{variant:"outline",onClick:n,value:"A",addStyles:` sm:text-sm md:text-md lg:text-lg  w-full ${x?.tipo_operacion?.value==="A"&&"text-secondary-msb bg-bg-2-msb border-bg-2-msb border-none hover:border-none transition duration-500 ease-in-out  "}`,id:"tipo_operacion",children:"Alquiler"})}),e("div",{className:"lg:col-start-5 lg:col-end-9 flex gap-4",children:e(c,{variant:"outline",onClick:n,value:"T",addStyles:`sm:text-sm md:text-md lg:text-lg  w-full  ${x?.tipo_operacion?.value==="T"&&"  text-secondary-msb bg-bg-2-msb border-bg-2-msb border-none hover:border-none transition duration-500 ease-in-out"}`,id:"tipo_operacion",children:"Alquiler Temporiario"})}),e("div",{className:"lg:col-start-9 lg:col-end-13 flex  gap-4",children:e(c,{variant:"outline",onClick:n,value:x?.in_tpr?.value,addStyles:`sm:text-sm md:text-md lg:text-lg  w-full  ${x?.in_tpr?.value==="COUNTRY"?" text-secondary-msb bg-bg-2-msb border-bg-2-msb border-none hover:border-none transition duration-500 ease-in-out":""}`,id:"in_tpr",children:"Barrios Cerrados y Countries"})}),e("div",{className:"lg:col-start-1 lg:col-end-3",children:e(m,{id:"tipo_inmueble",onChange:n,defaultOption:a.tipo_inmueble,opts:t.tipo_inmueble})}),e("div",{className:"md:col-1 lg:col-start-3  lg:col-end-13 md:col-start-1 md:col-end-4 flex gap-4  w-full flex-grow ",children:[e(Q,{filterOptsLocations:t.in_iub,propIdRef:"in_iub"}),e("div",{className:"hidden md:flex lg:hidden gap-4",children:e(c,{variant:"primary",onClick:k,className:"lg:w-auto text-base lg:text-lg xl:text-xl p-3 bg-red-500 text-white",addStyles:"sm:text-sm md:text-md lg:text-lg border-2 border-gray-300 rounded-md  flex w-full justify-center items-center",children:"BUSCAR"})}),e("div",{className:" md:hidden lg:flex lg:col-start-11  lg:col-end-13 flex lg:justify-between",children:e(c,{variant:"primary",onClick:k,type:"submit",className:"lg:w-auto text-base lg:text-lg xl:text-xl p-3 bg-red-500 text-white",addStyles:"w-full sm:text-sm md:text-md lg:text-lg flex lg:flex-grow justify-center items-center gap-x-8",children:[e("div",{children:e(Y,{})}),"BUSCAR"]})})]})]}),e("div",{className:"py-20",children:e("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-12 gap-4 md:px-0 px-3",children:[e("div",{class:"lg:col-start-4 lg:col-end-13 md:hidden hidden lg:flex  items-end justify-between w-full",children:[e("p",{className:"font-bold text-primary-text-msb text-sm md:text-md lg:text-lg",children:["Tenemos ",e("span",{className:"font-bold text-bg-2-msb text-sm md:text-md lg:text-lg",children:Array.isArray(i?.fichas)?i?.fichas.length:0})," resultados con tu búsqueda"]}),e(m,{id:"ordenar",variant:"secondary",addStyles:"bg-transparent relative w-full h-[56px] transition-all flex justify-between items'end h-fit py-0 w-fit gap-8",onChange:n,defaultOption:a.ordenar,opts:t.ordenar,children:e(B,{})})]}),e("aside",{className:"md:col-12 lg:col-start-1 lg:col-end-4",children:e("div",{className:"flex flex-col",children:[e("div",{className:"flex mb-4",children:e(m,{id:"Ambientes",onChange:n,defaultOption:a.Ambientes,opts:t.Ambientes})}),e("div",{className:"flex mb-4",children:e(m,{id:"calles",onChange:n,defaultOption:a.calles,opts:t.calles})}),e("div",{className:"flex mb-4",children:e(m,{id:"sellocalidades",onChange:n,defaultOption:a.sellocalidades,opts:t.sellocalidades})}),e("div",{className:"flex",children:e(m,{id:"barrios1",onChange:n,defaultOption:a.barrios1,opts:t.barrios1})}),e("div",{className:"mt-4",children:[e("p",{className:"font-bold text-primary-text-msb text-sm md:text-md lg:text-lg",children:"Moneda"}),e("div",{className:"flex items-center gap-4",children:[e("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"hidden",id:"moneda",value:"P",checked:a.moneda?.value==="P",onChange:()=>O("moneda","P")}),e("div",{className:`rounded-full border bg-tertiary-bg-msb w-5 h-5 flex items-center justify-center ${a.moneda?.value==="P"?"bg-tertiary-bg-msb":"bg-white border-5 border-separate"}`,children:a.moneda?.value==="P"&&e("div",{className:"w-4 h-4 border-2 rounded-full"})}),e("span",{className:"text-secondary-text-msb font-base  text-sm md:text-md lg:text-lg",children:"Pesos"})]}),e("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",className:"hidden",id:"moneda",value:"D",checked:a.moneda?.value==="D",onChange:()=>O("moneda","D")}),e("div",{className:`rounded-full border bg-tertiary-bg-msb w-5 h-5 flex items-center justify-center ${a.moneda?.value==="D"?"bg-tertiary-bg-msb":"bg-white border-5 border-separate"}`,children:a.moneda?.value==="D"&&e("div",{className:"w-4 h-4 border-2 rounded-full"})}),e("span",{className:"text-secondary-text-msb font-base  text-sm md:text-md lg:text-lg",children:"U$D"})]})]})]}),e("div",{className:"mt-4",children:[e("p",{className:"font-bold text-primary-text-msb text-sm md:text-md lg:text-lg",children:"Valores"}),e("div",{className:"flex gap-4",children:[e(m,{id:"valor_minimo",onChange:n,defaultOption:a.valor_minimo,opts:t.valor_minimo}),e(m,{id:"valor_maximo",onChange:n,defaultOption:a.valor_maximo,opts:t.valor_maximo})]})]}),e("div",{className:"mt-4",children:e(c,{type:"button",variant:"primary",onClick:V,addStyles:"w-full text-md border-2 border-gray-300 rounded-md flex justify-center items-center",children:"Limpiar búsqueda"})}),e("div",{class:"lg:col-start-4 lg:col-end-13 lg:hidden flex items-end justify-between w-full mt-4",children:[e("p",{className:"font-bold text-primary-text-msb text-sm md:text-md lg:text-lg",children:["Tenemos ",e("span",{className:"font-bold text-bg-2-msb text-sm md:text-md lg:text-lg",children:Array.isArray(i?.fichas)?i?.fichas.length:0})," resultados con tu búsqueda"]}),e(m,{id:"ordenar",variant:"secondary",addStyles:"bg-transparent relative w-full h-[56px] transition-all flex justify-between items'end h-fit py-0 w-fit",onChange:n,defaultOption:a.ordenar,opts:t.ordenar,children:e(B,{})})]})]})}),e("div",{className:"lg:col-start-4 lg:col-end-13",children:[e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 z-1 gap-4 animate-fade",children:d?e(v,{children:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map(l=>e("div",{className:"animate-ease-linear animate-pulse",children:e(G,{})}))}):e(v,{children:Array.isArray(i?.fichas)&&i.fichas.map(l=>e(J,{cardData:l,href:`resultados-de-busqueda/${l.operacion}/${l.in_loc}/${l.direccion_completa}/${l.in_suc}-${l.in_num}`},`${l.id}${l.in_suc}-${l.in_num}-${l.direccion_completa}`))})}),e("div",{className:"mt-20",children:i?.datos===void 0?e(v,{}):e(Z,{paginationData:i?.datos,setData:f,setLoading:s,resetPagination:S,isSubmitting:N})})]})]})})]})};export{we as default};
