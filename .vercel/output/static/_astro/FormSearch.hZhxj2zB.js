import{n as y}from"./router.B7bwGQeM.js";import{p as s,_ as x}from"./hooks.module.DQKj1niD.js";import{u as o}from"./jsxRuntime.module.CZQ5QUxB.js";import"./preact.module.DPkTw89T.js";const I=({zones:m})=>{const[r,i]=s(""),[d,u]=s([]),[h,p]=s(null),[l,n]=s(!1);x(()=>{f(b,300)(r)},[r]);const f=(e,t)=>{let c;return function(...a){clearTimeout(c),c=setTimeout(()=>e.apply(null,a),t)}},b=e=>{if(e.trim()==="")u([]),n(!1);else{const t=m?.filter(a=>a.zona.toLowerCase().startsWith(e.toLowerCase()));new Set(t.map(a=>a.id)).size!==t.length&&console.error("Duplicate keys found in searchResults array."),u(t),n(t.length===0)}},w=e=>{const t=e.target;i(t.value)},g=e=>{p(e),i(e.zona)};return o("form",{onSubmit:e=>{if(e.preventDefault(),r.trim()==="")n(!0);else{const t=new URLSearchParams(window.location.search);t.set("codigo_ficha",h?.id||""),window.history.pushState({},"",`${window.location.pathname.replace(/\/$/,"")}/?`+t.toString()),y(window.location.pathname.replace(/\/$/,"")+"/?"+t.toString())}},className:"relative max-w-md mx-auto mt-8",children:[o("div",{className:"flex items-center",children:[o("input",{type:"text",value:r,onInput:w,className:`w-full px-4 py-2 border rounded-l-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 ${l?"border-red-500":""}`,placeholder:"Search zone..."}),o("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 focus:outline-none",children:"Buscar"})]}),l&&o("div",{className:"text-red-500 mt-1 text-sm",children:"Campo obligatorio"}),d.length>0&&o("div",{className:"absolute left-0 mt-2 w-full max-h-60 overflow-auto rounded-md shadow-lg bg-white border border-gray-300 z-10",children:o("div",{className:"w-full py-2 text-base",children:d.map(e=>o("button",{id:"codigo_ficha",onClick:()=>g(e),className:"w-full text-left px-4 py-2 hover:bg-gray-200 focus:outline-none",children:e.zona},e.id))})}),l&&o("div",{className:"absolute left-0 mt-2 w-full max-h-60 overflow-auto rounded-md shadow-lg bg-white border border-gray-300 z-10",children:o("div",{className:"w-full py-2 text-base",children:o("div",{className:"px-4 py-2",children:"No hay resultados"})})})]})};export{I as default};
