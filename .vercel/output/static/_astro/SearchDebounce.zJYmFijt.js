import{u as a}from"./jsxRuntime.module.CZQ5QUxB.js";import{p as w,F as x,_ as u}from"./hooks.module.DQKj1niD.js";import{I as C}from"./InputField.CUOz9hpW.js";import{e as S,s as L,g}from"./filter-default.WOBuaRkQ.js";/* empty css                       */const T=()=>a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon icon-tabler icon-tabler-search",width:"24",height:"24",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),a("path",{d:"M21 21l-6 -6"})]}),U=({filterOptsLocations:v,propIdRef:n})=>{const s=S.get(),h=L.get(),[c,i]=w(s[n]),[l,f]=w([]),[m,d]=w(!1),o=x(null),p=((e,t)=>{let r;return function(...b){clearTimeout(r),r=window.setTimeout(()=>e.apply(this,b),t)}})(e=>{const t=v.filter(r=>r.label.toLowerCase().includes(e.toLowerCase()));f(t),d(!0)},300);u(()=>()=>f([]),[]);const k=e=>{const t=e.target.value,r=e.target.id;i({label:t,value:r}),p(t)};u(()=>{if(o.current){const e=window.innerHeight-o.current.getBoundingClientRect().top-160;o.current.style.maxHeight=`${e}px`}},[l]),u(()=>{s[n]?.value===""&&s[n]?.label===""&&i({label:s[n]?.label,value:s[n]?.value});const t=`${window.location.pathname}${h.length>0?`?${h}`:""}`;window.history.pushState({},"",t)},[h]);const y=e=>{g({[n]:{value:e.value,label:e.label}}),i(e),d(!1)};return u(()=>{const e=t=>{o.current&&!o.current.contains(t.target)&&d(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),u(()=>{const e=t=>{if(m&&l.length>0){const r=l.findIndex(b=>b.label===c.label);switch(t.key){case"ArrowUp":r>0&&i(l[r-1]);break;case"ArrowDown":r<l.length-1&&i(l[r+1]);break;case"Enter":g({[n]:{value:c.value,label:c.label}}),d(!1);break}}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[m,l,c]),a("div",{className:"relative top-0  w-full",children:[a(C,{id:n,type:"search",value:c?.label,className:"border-2 border-primary-msb focus:border-b-1 rounded-md px-4 flex w-full h-full py-2 focus:outline-none focus:ring-0 sticky z-0",onChange:k,autoComplete:"off",placeholder:"Buscar por barrio o localidad"}),m&&a("ul",{ref:o,className:"absolute z-20 inset-50 bg-white w-full border border-gray-300 rounded-md shadow-md overflow-auto scrollbar scrollbar-thumb-color scrollbar-track-color",children:l.length>0?l.map(e=>a("li",{className:"py-2 px-4 relative z-10 hover:bg-gray-200 cursor-pointer",onClick:t=>y(e),children:e.label},`${e.label}-${e.value}`)):a("li",{className:"py-2 px-4 text-gray-500",children:"No hay resultados"})})]})};export{U as S,T as a};
