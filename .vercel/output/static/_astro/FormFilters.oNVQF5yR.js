import{n as y}from"./router.B7bwGQeM.js";import{p as g,F as D,_ as M}from"./hooks.module.DQKj1niD.js";import{f as i}from"./formats.hIVXQWTe.js";import"./he.BBeSkhuU.js";import{u as e}from"./jsxRuntime.module.CZQ5QUxB.js";import"./preact.module.DPkTw89T.js";import"./_commonjsHelpers.Cpj98o6Y.js";const s=({opts:f,id:p,onChange:v,defaultOption:h})=>{const[x,S]=g(h?h.label:""),[u,b]=g(!1),c=D(null),w=()=>{b(!u)},r=a=>{S(a.label),w(),v({target:{id:p,value:a.value}})},d=a=>{c.current&&!c.current.contains(a.target)&&b(!1)};return M(()=>(document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}),[]),e("div",{ref:c,className:"relative w-100 m-1",children:[e("button",{id:String(p),onClick:w,className:"w-full p-2 rounded text-white flex bg-gray-600 justify-between items-center",type:"button",children:[x||"Select Option",e("svg",{className:`w-4 h-4 ms-3 ${u?"transform rotate-180":""}`,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),u&&e("div",{className:"w-full block absolute z-10 bg-white rounded-lg shadow max-h-32 overflow-y-auto",children:f.map((a,C)=>e("button",{id:C.toString(),onClick:()=>r(a),className:"w-full  text-left p-2 hover:bg-gray-100 animate-fadeIn",children:a.label}))})]})},K=({selects:f})=>{const{localidades:p,barrio:v,operacion:h,tipo:x,ambientes:S,calles:u,valor:b}=f,[c,w]=g({}),[r,d]=g({}),{desde:a,hasta:C}=b,A=i(v),N=i(p),L=i(h),k=i(x),P=i(S),$=i(u),R=i([{description:"$",value:"P"},{description:"U$S",value:"D"}]),U=i(a),T=i(C),l=m=>{const{id:n,value:o}=m.target;if(n==="valor_minimo"||n==="valor_maximo"){if(o){d({...r,[n]:Number(o)});const t=new URLSearchParams(window.location.search);t.set(n,o),window.history.pushState({},"","?"+t.toString())}}else d({...r,[n]:o})},F=async m=>{m.preventDefault(),m.stopPropagation();const n=new URL(window.location.href),o=new URLSearchParams(n.search),t={...c,...r};Object.keys(t).forEach(O=>{const _=t[O];_!==void 0&&_!==""?o.set(O,_):o.delete(O)});const j=`${window.location.pathname.replace(/\/$/,"")}/?${o.toString()}`.replace(/\/\//g,"/");y(j),w({...c,...r})},I=m=>{m.preventDefault(),setTimeout(()=>{window.location.reload(),d(r);const o=new URL(window.location.href),t=new URLSearchParams(o.search);t.delete("sellocalidades"),t.delete("barrios1"),t.delete("tipo_operacion"),t.delete("tipo_inmueble"),t.delete("Ambientes"),t.delete("calles"),t.delete("valor_minimo"),t.delete("valor_maximo"),t.delete("moneda"),t.delete("codigo_ficha"),window.history.pushState({},"",`${window.location.pathname}`+t.toString())},600);const n=window.location.pathname.replace(/\/\//g,"/");y(n)};return e("form",{id:"form-filters",class:"mb-4 w-100",onSubmit:F,children:[e("div",{class:"grid grid-rows md:grid-cols-1 gap-2",children:[e("label",{class:"text-white",id:"tipo_operacion",children:"Operación:"}),e(s,{id:"tipo_operacion",opts:L,onChange:l,defaultOption:{value:"All",label:"Seleccione una Operación"}}),e("label",{class:"text-white",id:"tipo_inmueble",children:"Tipo de Inmueble:"}),e(s,{id:"tipo_inmueble",opts:k,onChange:l,defaultOption:{value:"All",label:"Seleccione un Inmueble"}}),e("label",{class:"text-white",id:"Ambientes",children:"Ambientes:"}),e(s,{id:"Ambientes",opts:P,onChange:l,defaultOption:{value:"All",label:"Seleccione los Ambientes"}}),e("label",{htmlFor:"sellocalidades",class:"text-white",children:"Localidad :"}),e(s,{id:"sellocalidades",opts:N,onChange:l,defaultOption:{value:"All",label:"Seleccione una localidad"}}),e("label",{class:"text-white",id:"barrios1",children:"Barrios:     "}),e(s,{id:"barrios1",opts:A,onChange:l,defaultOption:{value:"All",label:"Seleccione un barrio"}}),e("label",{class:"text-white",id:"calles",children:"Calle:"}),e(s,{id:"calles",opts:$,onChange:l,defaultOption:{value:"All",label:"Seleccione una calle"}})]}),e("div",{class:"grid grid-flow-col my-2",children:[e("span",{class:"text-white flex items-center ",children:"Valor:"}),e(s,{id:"valor_minimo",opts:U,onChange:l,defaultOption:{value:"All",label:"Mínimo"}}),e(s,{id:"valor_maximo",opts:T,onChange:l,defaultOption:{value:"All",label:"Máximo"}})]}),e("div",{class:"grid grid-flow-col my-2",children:[e(s,{id:"moneda",opts:R,onChange:l,defaultOption:{value:"All",label:"Moneda"}}),e("div",{className:"relative m-1",children:[e("span",{className:"absolute left-2 bottom-3 text-gray-500",children:"MS"}),e("input",{id:"codigo_ficha",className:"form-input block w-full py-2 items-center px-3 pl-10 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",type:"text",placeholder:"Ingrese el código",value:`${r.codigo_ficha||""}`,onChange:l})]})]}),e("div",{class:"flex justify-between items-center px-1 mt-5 gap-1",children:[e("button",{class:"bg-[#768294] text-white px-4 py-2 rounded",type:"button",onClick:I,children:"Limpiar"}),e("button",{type:"submit",class:"w-full p-2 text-white  rounded bg-blue-600 hover:bg-blue-700",children:"Buscar"})]})]})};export{K as default};
